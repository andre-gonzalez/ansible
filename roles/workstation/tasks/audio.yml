---
# - name: Install pulseaudio packages
#   tags:
#     - pulseaudio
#     - never
#   ansible.builtin.package:
#     name:
#       - pulseaudio
#       - alsa-utils
#       - pavucontrol
#       - pulseaudio-bluetooth
#       - pulseaudio-alsa
#     state: present
#   become: true
#   notify: "restart pulseaudio"

# - name: Set pulseaudio to automatically change to the bluetooth once connected
#   tags:
#     - pulseaudio
#     - never
#   ansible.builtin.lineinfile:
#     path: /etc/pulse/default.pa
#     line: 'load-module module-switch-on-connect'
#     create: yes
#     backrefs: true
#     state: present
#   become: true

- name: Install pipewire packages | Arch
  tags:
    - full-install
    - light-install
    - pipewire
  ansible.builtin.package:
    name:
      - alsa-utils
      - pavucontrol # Audio control interface
      - pipewire-alsa # Rounte all application using ALSA API through pipewire
      - pipewire-docs # Not necessary. Only documentation
      - wireplumber # Session manager. Alternative to pipewire-media-session
      - qpwgraph  # GUI session manager
      - pipewire-pulse
      - pipewire-jack
      - pipewire-audio
      - pipewire
    state: present
  become: true
  when: ansible_distribution == "Archlinux"

- name: Install pipewire packages | Debian
  tags:
    - full-install
    - light-install
    - pipewire
  ansible.builtin.package:
    name:
      - pipewire
      - pipewire-audio-client-libraries
    state: present
  become: true
  when: ansible_distribution == "Debian"
