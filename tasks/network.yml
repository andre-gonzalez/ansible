- name: Install wireless drivers (netbook) - Debian, Ubuntu
  tags:
    - netbook
    - never
  package:
    name: firmware-b43-install
    state: present
    update_cache: false
  when: ansible_distribution in ["Debian", "Ubuntu"]
  become: true

- name: Install wireless drivers (netbook) - Arch
  tags:
    - netbook
    - never
  kewlfft.aur.aur:
    name:
      - b43-firmware-classic
    use: yay
    state: present
    update_cache: no
  when: ansible_distribution == "Archlinux"

- name: Install wireless drivers (samsung-expert)
  tags:
    - samsung-expert
    - never
  package:
    name: broadcom-wl
    state: present
    update_cache: false
  when: ansible_distribution in ["Archlinux"]
  become: true

- name: Install connman
  tags:
    - full-install
    - light-install
    - network
  package:
    name: connman
    state: present
    update_cache: false
  become: true

- name: stop systemd-networkd
  tags:
    - full-install
    - light-install
    - network
  ansible.builtin.service:
    name: systemd-networkd
    state: stopped
    enabled: no
  become: yes

- name: restart connman
  tags:
    - full-install
    - light-install
    - network
  ansible.builtin.service:
    name: connman
    state: restarted
    enabled: yes
  become: yes

- name: start iwd
  tags:
    - full-install
    - light-install
    - network
  ansible.builtin.service:
    name: iwd
    state: started
    enabled: yes
  become: yes
